<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Superfeedr : Sinatra, Heroku and Superfeedr </title>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
  <meta name="google-site-verification" content="ofroHQ3qXBS1SQfblK9-U_oduGZ975Bb3i_uP13Myao" />

  <!-- Stylesheets -->
  <link href="http://yui.yahooapis.com/3.1.1/build/cssreset/reset-min.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="http://superfeedr.com/stylesheets/superfeedr.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="http://superfeedr.com/stylesheets/print.css" media="print" rel="stylesheet" type="text/css" />
  <link href="http://superfeedr.com/stylesheets/shjs/sh_nedit.min.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="http://superfeedr.com/stylesheets/thickbox.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="/css/blog.css" media="screen" rel="stylesheet" type="text/css" />
  <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/atom.xml">

 </head>

 <body class="blog">
   <div id="bg">
     <div id="wrapper">
      <div id="logo">
       <a href="http://superfeedr.com" class="home"><img alt="Superfeedr" src="http://superfeedr.com/images/superfeedr_complete.png" /></a>
     </div>
     <ul id="navigation">
      <li><a href="http://documentation.superfeedr.com" alt="RTFM">Documentation</a></li>
      <li><a href="http://superfeedr.com/about" alt="All you wanted to know. Almost">About</a></li>
    </ul>
    <div class="clear"></div>
    <div id="main_bg">
      <div id="main_top">
       <h1>Sinatra, Heroku and Superfeedr</h1>
     </div> <!--main_top-->

     <div id="content">
        <div id="post">
    <h2>Sinatra, Heroku and Superfeedr</h2>
    <div style="color:#666; font-size:0.9em; margin-bottom: 20px"><img style="float:left; margin: -2px 3px 3px 0px" src="http://www.gravatar.com/avatar/b30ce50678f0e934eaa6697425c59dd7?s=20" >By <a href="http://ouvre-boite.com">Julien</a>, on 21 Jan 2012</div>
<p>This is a short tutorial on how to deploy an Sinatra web app that uses Superfeedr to Heroku. This app provides a very simple home page that lists the latests entries of some of your favorites sites. It&#8217;s greatly inspired by the awesome <a href="http://start.io/">start.io</a> from the awesome <a href="http://petervidani.com/">Peter Vidani</a> and <a href="http://jacobbijani.com/">Jacob Bijani</a></p>
<h3>Set up</h3>
<p>We will use <a href="http://www.sinatrarb.com/">Sinatra</a>, the <a href="https://github.com/superfeedr/rack-superfeedr">Rack Superfeedr gem</a>, as well as Twitter&#8217;s bootstrap for the layout, because I suck at making things shinny.</p>
<p>Let&#8217;s start first by creating the application on Heroku.</p>
<p>Create the repo:<br />
<code>
    mkdir start-page &amp;&amp; cd start-page
</code><br />
<code>
    git init
</code><br />
<code>
    git add .
</code><br />
<code>
    git commit -m "init"
</code></p>
<p>Create the application on Heroku:<br />
<code>
    heroku create --stack cedar
</code></p>
<p>Add the hostname as an environment variable. It is used by the rack middleware to build the callback urls:<br />
<code>
    heroku config:add  HOST=&lt;YOUR APP DOMAIN&gt;
</code><br />
Add the superfeedr addon:<br />
<code>
    heroku addons:add superfeedr
</code></p>
<h3>Implementation</h3>
<p>This implementation is minimalistic, feel free to look at the code closely.</p>
<p>Let&#8217;s add the files:<br />
<code>
    touch app.rb
</code><br />
<code>
    touch config.ru
</code><br />
<code>
    touch Gemfile
</code><br />
<code>
    mkdir views/ &amp;&amp; touch views/index.erb
</code></p>
<p>In <code>app.rb</code>:<br />
<script src="https://gist.github.com/1653742.js?file=app.rb"></script></p>
<p>In <code>config.ru</code>:<br />
<script src="https://gist.github.com/1653744.js?file=config.ru"></script></p>
<p>In <code>Gemfile</code>:<br />
<script src="https://gist.github.com/1653748.js?file=Gemfile"></script></p>
<p>In <code>views/index.erb</code>:<br />
<script src="https://gist.github.com/1653753.js?file=index.erb"></script></p>
<p><code>
    git add .
</code><br />
<code>
    git commit -m "implemented" -a
</code></p>
<h3>Deploying</h3>
<p>That&#8217;s the simplest part:</p>
<p>First, let&#8217;s install the gems.<br />
<code>
    bundle install
</code><br />
<code>
    git add Gemfile.lock
</code><br />
<code>
    git commit -m "adding Gemfile.lock" -a
</code></p>
<p>And push the code<br />
<code>
    git push heroku master
</code></p>
<p>&#8230; And that&#8217;s it!</p>
<p>Point your browser to your Heroku application. It is likely that you&#8217;ll have to wait for the feeds you have added to have new content before you see it appear on your home page. The last step is to make this page your default start page in your favorite web browser.</p>
<p>Check <a href="http://floating-sky-5183.herokuapp.com/">mine</a>!</p>
<h2>Gotchas</h2>
<p>Heroku will put this application to sleep if you only use a single dyno&#8230; and since we store the entries in memory for now, that means you&#8217;ll lose that data if the app goes idle. The solution is very simple: store the data, using another <a href="https://addons.heroku.com/">Heroku addon</a>!</p>
<p>Of course, this is a very simple application and there is a ton of little things that one can do to improve it:</p>
<ul>
	<li>add the ability to dynamically subscribe to feeds</li>
	<li>show meta data, like the number of bit.ly clicks on each of the stories</li>
	<li>auto-refresh the page</li>
	<li>&#8230;</li>
</ul>
<p>The <strong>Superfeedr Heroku addon</strong> is still in alpha to this date, so if you want to run, this, please <a href="http://superfeedr.com/about">email us</a> and we&#8217;ll get you in!</p>
</div>

<blockquote>
  <p>Liked this post? <input type="button" onclick="(function(){var z=document.createElement('script');z.src='http://www.subtome.com/load.js';document.body.appendChild(z);})()" value="Follow this blog!" /> to get more or read the <a href="/archive.html">archive</a>.</p>
</blockquote>


<small class="meta">
</small>

<div id="comments">
    <h2>Comments</h2>
    <div id="disqus_thread">
    </div>
    <script type="text/javascript" src="http://disqus.com/forums/superfeedr-thoughts/embed.js"></script>
    <noscript>
        <a href="http://superfeedr-thoughts.disqus.com/?url=ref">View the discussion thread.</a>
    </noscript>
    <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

    </div> <!--content-->

    <div id="footer">
      <ul id="footer_navigation">
        <li><a href="http://documentation.superfeedr.com">Docs</a></li>
        <li><a href="https://github.com/superfeedr/documentation/issues">Support</a></li>
        <li><a href="http://blog.superfeedr.com">Blog</a></li>
        <li><a href="https://superfeedr.com/cost">Pricing</a></li>
        <li><a href="https://superfeedr.com/terms">Terms</a></li>
      </ul>
    </div>
    <div id="log" style="" ></div>
  </div> <!--main_bg-->
</div><!--wrapper-->
</div><!--bg-->
<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  <!--//--><![CDATA[//><!--
  try {
      var pageTracker = _gat._getTracker('UA-9285763-1');
      pageTracker._setDomainName("superfeedr.com");
      pageTracker._initData();
      pageTracker._trackPageview();
  } catch(err) {}
  //--><!]]>
</script>
</body>
</html>
